(()=>{var b=Object.defineProperty;var A=Object.getOwnPropertySymbols;var w=Object.prototype.hasOwnProperty,y=Object.prototype.propertyIsEnumerable;var T=(r,i,c)=>i in r?b(r,i,{enumerable:!0,configurable:!0,writable:!0,value:c}):r[i]=c,O=(r,i)=>{for(var c in i||(i={}))w.call(i,c)&&T(r,c,i[c]);if(A)for(var c of A(i))y.call(i,c)&&T(r,c,i[c]);return r};(function(){let r=document.currentScript,i="empire",c=90*24*60*60*1e3,f=window.location.hostname,h=r.getAttribute("data-api-host")||"https://app.empire-internet.com",l=(()=>{let s={domain:f==="localhost"?void 0:`.${f.replace(/^www\./,"")}`,path:"/",sameSite:"Lax",expires:new Date(Date.now()+c).toUTCString()},e=r.getAttribute("data-cookie-options");if(!e)return s;let a=JSON.parse(e);return a.expiresInDays&&(a.expires=new Date(Date.now()+a.expiresInDays*24*60*60*1e3).toUTCString(),delete a.expiresInDays),O(O({},s),a)})(),g=(()=>{let s=r.getAttribute("data-domains");if(s)try{return JSON.parse(s)}catch(e){}return{refer:r.getAttribute("data-short-domain")}})(),p=g.refer,t=r.getAttribute("data-attribution-model")||"last-click",n=r.getAttribute("data-query-param")||"via",o=new URLSearchParams(location.search).get(n),u={get(s){var e;return(e=document.cookie.split(";").map(a=>a.trim().split("=")).find(([a])=>a===s))==null?void 0:e[1]},set(s,e){let a=Object.entries(l).filter(([,_])=>_).map(([_,I])=>`${_}=${I}`).join("; ");document.cookie=`${s}=${e}; ${a}`}},d=!1;function m(s){d||(d=!0,fetch(`${h}/api/track/click`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({domain:p,key:s,url:window.location.href,referrer:document.referrer})}).then(e=>e.ok&&e.json()).then(e=>{e&&u.set(i,e.clickId)}))}function S(){let s=new URLSearchParams(location.search),e=()=>!u.get(i)||t!=="first-click",a=s.get(i);if(a&&e()){u.set(i,a);return}o&&p&&e()&&m(o)}window._empireAnalytics={c:u,i,h:f,a:h,o:l,d:p,m:t,p:n,v:o,n:g},S()})();var k=()=>{let{c:r,i,h:c,n:f}=window._empireAnalytics,h=new Set;function l(t){var s;let n=(s=f.outbound)==null?void 0:s.split(",").map(e=>e.trim());if(!(n!=null&&n.length))return;let o=c.replace(/^www\./,""),u=n.filter(e=>e!==o),d=t||r.get(i);if(!d)return;let m=u.map(e=>`a[href*="${e}"]`).join(","),S=document.querySelectorAll(m);!S||S.length===0||S.forEach(e=>{if(!h.has(e))try{let a=new URL(e.href);a.searchParams.set(i,d),e.href=a.toString(),h.add(e)}catch(a){}})}document.readyState==="loading"?document.addEventListener("DOMContentLoaded",()=>l()):l(),setInterval(l,2e3),window.addEventListener("popstate",()=>l());let g=history.pushState,p=history.replaceState;history.pushState=function(){g.apply(this,arguments),l()},history.replaceState=function(){p.apply(this,arguments),l()}};window._empireAnalytics?k():window.addEventListener("load",k);(function(){let r=["empire","dclid"],i=[{match:"pimms_client_reference_id=1",replace:t=>`client_reference_id=empire_${t}`},{match:"empire=1",replace:t=>`empire=${t}`},{match:"utm_term=1",replace:t=>`utm_term=${t}`}],c=null;function f(t){let o=`; ${document.cookie}`.split(`; ${t}=`);return o.length===2?o.pop().split(";").shift():null}function h(t){for(let n of t){let o=f(n);if(o)return{name:n,value:o}}return null}function l(t){document.querySelectorAll("a[href]").forEach(o=>{let u=!1,d=o.href;i.forEach(({match:m,replace:S})=>{if(d.includes(m)){let s=d.replace(m,S(t));d!==s&&(o.href=s,d=s,u=!0)}}),u&&console.log(`[EMPIRE] Updated link: ${o.href}`)})}function g(t){clearTimeout(c),c=setTimeout(()=>l(t),300)}function p(){let t=h(r);if(!t)return;console.log(`[EMPIRE] [links] Using ${t.name}:`,t.value),l(t.value),new MutationObserver(()=>g(t.value)).observe(document.body,{childList:!0,subtree:!0})}document.readyState==="loading"?document.addEventListener("DOMContentLoaded",p):p()})();(function(){let r=["empire","dclid"],i=["data-cal-link"],c="empire=1",f=null;function h(n){let o=document.cookie.split("; ");for(let u of o){let[d,m]=u.split("=");if(d===n)return m}return null}function l(n){for(let o of n){let u=h(o);if(u)return u}return null}function g(n){i.forEach(o=>{let u=`[${o}]`;document.querySelectorAll(u).forEach(d=>{let m=d.getAttribute(o);m&&m.includes(c)&&(d.setAttribute(o,m.replace(c,`empire=${n}`)),console.log(`[EMPIRE] Updated ${o}:`,d))})})}function p(n){clearTimeout(f),f=setTimeout(()=>g(n),300)}function t(){let n=l(r);if(!n)return;g(n),new MutationObserver(()=>p(n)).observe(document.body,{childList:!0,subtree:!0})}document.readyState==="loading"?document.addEventListener("DOMContentLoaded",t):t()})();})();
